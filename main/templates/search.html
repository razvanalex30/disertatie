{% extends 'base.html' %}
{% block content %}
    <br/>

        <h2>Search Results:</h2>
        <p>We have found ({{topologies_nr}}) topologies which contain: {{searched}}</p>
        <br/>

{% for topology in topologies %}
<div class="shadow p-3 mb-5 bg-body-tertiary rounded">
    <h2 style="text-align: center"><a>{{topology.topology_name}}</a></h2><br/>
    <h6>Description:</h6>
    <p class="cutoff-text">{{topology.topology_description|safe|remove_tags}}</p>
    <br/>
    <br/>
    {% if topology.topology_creator_id == current_user.id %}
        <div class="d-flex" style="justify-content: center">
            <div class="me-2">
                <a href="{{url_for('run_script', topology_name=topology.topology_name)}}" class="btn btn-outline-secondary btn-sm">Run Topology</a>
            </div>
            <div class="me-2">
                {% if topology.topology_name in created_topology_names %}
                    <a href="{{url_for('edit_topology', id=topology.id)}}" class="btn btn-outline-secondary btn-sm">Edit Topology</a>
                {% else %}
                    <a href="{{url_for('edit_topology_uploaded', id=topology.id)}}" class="btn btn-outline-secondary btn-sm">Edit Topology</a>
                {% endif %}
            </div>
            <div class="me-2">
                {% if topology.topology_name in created_topology_names %}
                    <form method="post" action="{{ url_for('delete_topology', id=topology.id) }}" onsubmit="return confirm('Are you sure you want to delete this topology?');">
                    <button type="submit" class="btn btn-outline-danger btn-sm">Delete Topology</button>
                    </form>
                {% else %}
                    <form method="post" action="{{ url_for('delete_topology_uploaded', id=topology.id) }}" onsubmit="return confirm('Are you sure you want to delete this topology?');">
                    <button type="submit" class="btn btn-outline-danger btn-sm">Delete Topology</button>
                    </form>
                {% endif %}
            </div>
        </div>
    {% endif %}

</div>
<br/>



{% endfor %}



{% endblock %}
