{% extends 'base.html' %}

{% block content %}

{% for message in get_flashed_messages() %}
        <div class="alert alert-warning alert-dismissible fade show" role="alert">
            {{ message }}
      <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>


{% endfor %}

<br/>
{% if topologies_uploaded.items %}
    <h1 class="mb-3">Topologies uploaded ({{topologies_uploaded.total}}) </h1>
    {% for topology in topologies_uploaded.items %}
    <div class="shadow p-3 mb-5 bg-body-tertiary rounded">
        <h2><a>{{topology.topology_name}}</a></h2><br/>
        <h6>Description:</h6>
            <a>{{topology.topology_description|safe}}</a>
        <br/>
        <br/>
        {% if topology.topology_creator_id == current_user.id %}
            <div class="d-flex">
                <div class="me-2">
                    <a href="{{url_for('run_script', topology_name=topology.topology_name)}}" class="btn btn-outline-secondary btn-sm">Run Topology</a>
                </div>
                <div class="me-2">
                    <a href="{{url_for('edit_topology_uploaded', id=topology.id)}}" class="btn btn-outline-secondary btn-sm">Edit Topology</a>
                </div>
                <div class="me-2">
                    <form method="post" action="{{ url_for('delete_topology_uploaded', id=topology.id) }}" onsubmit="return confirm('Are you sure you want to delete this topology?');">
                    <button type="submit" class="btn btn-outline-danger btn-sm">Delete Topology</button>
                    </form>
                </div>
            </div>
        {% endif %}

    </div>
    <br/>
    {% endfor %}
    {% for page_num in topologies_uploaded.iter_pages(left_edge=1, right_edge=1, left_current=1, right_current=2) %}
        {% if page_num %}
            {% if topologies_uploaded.page == page_num %}
                <a class="btn btn-info mb-4" href="{{ url_for('topologies_uploaded', page=page_num) }}"> {{ page_num }} </a>
            {% else %}
                <a class="btn btn-outline-info mb-4" href="{{ url_for('topologies_uploaded', page=page_num) }}"> {{ page_num }} </a>
            {% endif %}
    {% else %}
            ...
    {% endif %}

    {% endfor %}

{% else %}
    <h1 class="mb-3">Topologies uploaded ({{topologies_uploaded.total}}) </h1>
    <h3 class="mb-3">Currently you don't have any topologies uploaded, please upload one. </h3>

{% endif %}


{% endblock %}