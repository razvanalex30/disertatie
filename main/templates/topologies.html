{% extends 'base.html' %}

{% block content %}

{% for message in get_flashed_messages() %}
        <div class="alert alert-warning alert-dismissible fade show" role="alert">
            {{ message }}
      <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>


{% endfor %}

<br/>


{% set created_topology_names = topologies_created|map(attribute='topology_name')|list %}
{% for topology in topologies %}
<div class="shadow p-3 mb-5 bg-body-tertiary rounded">
    <h2><a href="{{url_for('topology', id=topology.id)}}">{{topology.topology_name}}</a></h2><br/>
    {{topology.topology_description|safe}}<br/>
    <br/>
    {% if topology.topology_creator_id == current_user.id %}
        <div class="d-flex">
            <div class="me-2">
                <a href="{{url_for('topology', id=topology.id)}}" class="btn btn-outline-secondary btn-sm">Run Topology</a>
            </div>
            <div class="me-2">
                {% if topology.topology_name in created_topology_names %}
                    <a href="{{url_for('edit_topology', id=topology.id)}}" class="btn btn-outline-secondary btn-sm">Edit Topology</a>
                {% else %}
                    <a href="{{url_for('edit_topology_uploaded', id=topology.id)}}" class="btn btn-outline-secondary btn-sm">Edit Topology</a>
                {% endif %}
            </div>
            <div class="me-2">
                {% if topology.topology_name in created_topology_names %}
                    <form method="post" action="{{ url_for('delete_topology', id=topology.id) }}" onsubmit="return confirm('Are you sure you want to delete this topology?');">
                    <button type="submit" class="btn btn-outline-danger btn-sm">Delete Topology</button>
                    </form>
                {% else %}
                    <form method="post" action="{{ url_for('delete_topology_uploaded', id=topology.id) }}" onsubmit="return confirm('Are you sure you want to delete this topology?');">
                    <button type="submit" class="btn btn-outline-danger btn-sm">Delete Topology</button>
                    </form>
                {% endif %}
            </div>
        </div>
    {% endif %}

</div>
<br/>





{% endfor %}







{% endblock %}